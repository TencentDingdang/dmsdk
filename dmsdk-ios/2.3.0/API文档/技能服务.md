# TVSTSKM

## 一、技能服务 <TVSTSKM/TVSTSKMProxy.h>

### 1 TVSTSKMProxy 技能服务访问代理类

#### 1.1 成员

 无；

#### 1.2 方法

##### `-(instancetype)initWithDeviceInfo:(TVSDeviceInfo*)deviceInfo;`

  **描述**:

  实例化（适用于QQ/微信登录）；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 | 备注 |
  | ------ | ------ | ------ | ------ | ------ |
  | deviceInfo | TVSDeviceInfo* | 设备信息 | 是 | 其中 productId 必填，dsn 和 guid 二选一 |

  **返回**:

  TVSTSKMProxy 实例；

## 二、闹钟管理 <TVSTSKM/TVSAlarmReminder.h>

闹钟和提醒管理的JsonBlobInfo数据协议请参阅以下文档：

*  [tvs-tools/闹钟 云端管理接入指引.md at master · TencentDingdang/tvs-tools](https://github.com/TencentDingdang/tvs-tools/blob/master/doc/%E9%97%B9%E9%92%9F%20%E4%BA%91%E7%AB%AF%E7%AE%A1%E7%90%86%E6%8E%A5%E5%85%A5%E6%8C%87%E5%BC%95.md)
*  [tvs-tools/uniAccess接口能力.md#3-数据闹钟设备同步 at master · TencentDingdang/tvs-tools](https://github.com/TencentDingdang/tvs-tools/blob/master/doc/uniAccess%E6%8E%A5%E5%8F%A3%E8%83%BD%E5%8A%9B.md#3-%E8%AE%BE%E5%A4%87%E9%97%B9%E9%92%9F%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5)
*  [tvs-tools/提醒 云端管理接入指引.md at master · TencentDingdang/tvs-tools](https://github.com/TencentDingdang/tvs-tools/blob/master/doc/%E6%8F%90%E9%86%92%20%E4%BA%91%E7%AB%AF%E7%AE%A1%E7%90%86%E6%8E%A5%E5%85%A5%E6%8C%87%E5%BC%95.md)
*  [tvs-tools/uniAccess接口能力.md#4-数据提醒设备同步 at master · TencentDingdang/tvs-tools](https://github.com/TencentDingdang/tvs-tools/blob/master/doc/uniAccess%E6%8E%A5%E5%8F%A3%E8%83%BD%E5%8A%9B.md#4-%E8%AE%BE%E5%A4%87%E6%8F%90%E9%86%92%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5)

### 1 TVSAlarmReminder 类

#### 1.1 TVSAlarmReminderOperation 枚举

| 名称 | 描述 |
| ------ | ------ |
| TVSAlarmReminderOperationManage | 管理 |
| TVSAlarmReminderOperationSyncData | 同步数据 |
| TVSAlarmReminderOperationClearData | 清数据 |

#### 1.2 成员

 无；

#### 1.3 方法

##### `-(instancetype)initWithTSKMProxy:(TVSTSKMProxy*)tskmProxy;`

  **描述**:

  初始化方法；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | tskmProxy | TVSTSKMProxy* | 技能服务访问代理 | 是 |

  **返回**:

  TVSAlarmManager 类实例；

##### `-(void)alarmOperation:(TVSAlarmReminderOperation)op blob:(NSDictionary*)blob handler:(TVSTSKMCallback)handler;`

  **描述**:

  管理闹钟；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | op | TVSAlarmReminderOperation | 操作 | 是 |
  | blob | NSDictionary* | 请求数据 | 是 |
  | handler | TVSTSKMCallback | 回调 | 是 |

  **返回**:

  无；

##### `-(void)reminderOperation:(TVSAlarmReminderOperation)op blob:(NSDictionary*)blob handler:(TVSTSKMCallback)handler;`

  **描述**:

  管理提醒；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | op | TVSAlarmReminderOperation | 操作 | 是 |
  | blob | NSDictionary* | 请求数据 | 是 |
  | handler | TVSTSKMCallback | 回调 | 是 |

  **返回**:

  无；

## 三、儿童模式 <TVSTSKM/TVSChildMode.h>

### 1 TVSChildMode 类

#### 1.1 成员

 无；

#### 1.2 方法

##### `-(instancetype)initWithTSKMProxy:(TVSTSKMProxy*)tskmProxy;`

  **描述**:

  初始化方法；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | tskmProxy | TVSTSKMProxy* | 技能服务访问代理 | 是 |

  **返回**:

  TVSChildMode 类实例；

##### `-(void)setConfigWithJsonBlob:(NSDictionary*)jsonBlob handler:(TVSTSKMCallback)handler;`

  **描述**:

  保存儿童模式配置；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | jsonBlob | NSDictionary* | 请求数据 | 是 |
  | handler | TVSTSKMCallback | 回调 | 是 |

  **返回**:

  无；

##### `-(void)getConfigWithJsonBlob:(NSDictionary*)jsonBlob handler:(TVSTSKMCallback)handler;`

  **描述**:

  获取儿童模式配置；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | jsonBlob | NSDictionary* | 请求数据 | 是 |
  | handler | TVSTSKMCallback | 回调 | 是 |

  **返回**:

  无；

## 四、第三方授权 <TVSTSKM/TVSThirdPartyAuth.h>

### 1 TVSThirdPartyAuth 类

#### 1.1 成员

 无；

#### 1.2 方法

##### `+(void)gotoAuthWithAccountInfo:(nullable TVSAccountInfo*)accountInfo deviceInfo:(TVSDeviceInfo*)deviceInfo handler:(void(^)(BOOL))handler;`

  **描述**:

  跳转到云小微 APP 进行第三方授权;

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 | 备注 |
  | ------ | ------ | ------ | ------ | ------ |
  | accountInfo | TVSAccountInfo* | 账号信息 | 使用本 SDK 做账号登录的传 nil |  |
  | deviceInfo | TVSDeviceInfo* | 设备信息 | 是 | 其中 productId、dsn、guid 必填！！ |
  | handler | void(^)(BOOL) | 回调，BOOL 表示是否成功 | 是 |  |

  **返回**:

  无；

##### `-(instancetype)initWithTSKMProxy:(TVSTSKMProxy*)tskmProxy deviceInfo:(TVSDeviceInfo*)deviceInfo;`

  **描述**:

  实例化方法;

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 | 备注 |
  | ------ | ------ | ------ | ------ | ------ |
  | tskmProxy | TVSTSKMProxy* | 账号信息 | 是 |
  | deviceinfo | TVSDeviceInfo* | 设备信息 | 是 |

  **返回**:

  TVSThirdPartyAuth 实例；

 ##### `-(void)getBindedAccountInfoWithHandler:(void(^)(TVSAccountInfo*))handler;`

  **描述**:

  查询绑定的账号信息;

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | handler | void(^)(TVSAccountInfo*) | 回调，参数为账号信息 | 是 |

  **返回**:

  无； 

##### `-(void)unbindWithAccountInfo:(TVSAccountInfo*)accountInfo handler:(void(^)(BOOL))handler;`

  **描述**:

  解绑账号信息;

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | accountInfo | TVSAccountInfo* | 账号信息 | 是 |
  | handler | void(^)(BOOL) | 回调，参数为是否成功 | 是 |

  **返回**:

  无； 

## 五、设备控制 <TVSTSKM/TVSDeviceControl.h>

设备控制的nameSpace、name和payload等字段的数据协议请参阅以下文档：[solution/TVS设备播控 at master · TencentDingdang/solution](https://github.com/TencentDingdang/solution/tree/master/TVS%E8%AE%BE%E5%A4%87%E6%92%AD%E6%8E%A7)。

### 1 TVSDeviceControl 类

#### 1.1 成员

 无；

#### 1.2 方法

##### `-(instancetype)initWithTSKMProxy:(TVSTSKMProxy*)tskmProxy;`

  **描述**:

  初始化方法；

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | tskmProxy | TVSTSKMProxy* | 技能服务访问代理 | 是 |

  **返回**:

  TVSDeviceControl 类实例；

##### `-(NSString *)controlDeviceWithNamespace:(NSString *)nameSpace name:(NSString *)name payload:(NSDictionary *)palyload handler:(TVSTSKMCallback)handler;`

  **描述**:

  设备控制；
  必须调用设备绑定后执行!! messageId 字段内部会自动生成，并返回，无需自行传入！！

  **参数**:

  | 名称 | 类型 | 描述 | 是否必填 |
  | ------ | ------ | ------ | ------ |
  | namespace | NSString* | 操作域 | 是 |
  | name | NSString* | 操作指令 | 是 |
  | payload | NSDictionary* | 操作参数 | 是 |
  | handler | TVSTSKMCallback | 回调 | 是 |

  **返回**:

  操作唯一串；
